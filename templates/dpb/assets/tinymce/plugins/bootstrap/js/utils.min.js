"use strict";function makeResponsive(){$("body").width()<768&&$(".container").addClass("container-xs")}function getBootstrapStyles(){var t,e,a,n;t=e=$(window.parent.document.body).find("iframe").contents().find(".mce-content-body").css("background-color"),t.match(/rgb(255, 255, 255)/)?$("body").css("background-color","#fafafa"):(t=shadeRGBColor(t,.07),a=shadeRGBColor(t,-.2),n=shadeRGBColor(t,.3),$("body").css("background-color",t),$(".choice-title, #preview-title, #code-title").css("border-top-color",a),$("<style>.choice-title:after, #preview-title:after, #code-title:after{border-top-color: "+n+"}</style>").appendTo("head"),$("#preview").css("background-color",e))}function shadeRGBColor(t,e){var a=t.split(","),n=0>e?0:255,s=0>e?-1*e:e,r=parseInt(a[0].slice(4)),o=parseInt(a[1]),i=parseInt(a[2]);return"rgb("+(Math.round((n-r)*s)+r)+","+(Math.round((n-o)*s)+o)+","+(Math.round((n-i)*s)+i)+")"}function toggleBtn(t){return $(t).find(".btn").toggleClass("active"),$(t).find(".btn").toggleClass("btn-success"),$(t).find(".btn").toggleClass("btn-default"),"true"==$(t).find(".active").attr("data-attr")?!0:!1}function toggleAllBtns(t,e){return $(t).each(function(){e?($(this).find('button[data-attr="false"]').addClass("active").removeClass("btn-default").addClass("btn-success"),$(this).find('button[data-attr="true"]').removeClass("active").removeClass("btn-success").addClass("btn-default")):($(this).find('button[data-attr="true"]').addClass("active").removeClass("btn-default").addClass("btn-success"),$(this).find('button[data-attr="false"]').removeClass("active").removeClass("btn-success").addClass("btn-default"))}),$(t).find(".btn").toggleClass("active"),$(t).find(".btn").toggleClass("btn-success"),$(t).find(".btn").toggleClass("btn-default"),"true"==$(t).find(".active").attr("data-attr")?!0:!1}function getCode(t){var e;return e=$(window.parent.document.body).find(".mce-tinymce-inline")[0]?$(window.parent.document.body).find(".mce-edit-focus").find(t).clone().wrap("<div>").parent().html():$(window.parent.document.body).find("iframe").contents().find(t).clone().wrap("<div>").parent().html()}function updateCode(){var t=$("#test-wrapper").html();$("<div>").html(t).find("table.table").length>0&&"new-table"==$("<div>").html(t).find("table.table").attr("data-attr")&&(t=$("<div>").html(t).find("th, td").text("").closest("div").html());for(var e=new Array(/\s?data-mce-[a-z]+="[^"]+"/g),a=new Array("","","","",""),n=e.length-1;n>=0;n--)t=t.replace(e[n],a[n]);var s=new Array(["class"]),r=new Array(["span"]);$("#test-wrapper").hasClass("test-icon-wrapper")?(s.push(["style"]),t="&nbsp;"+$.trim(escapeHtml($.htmlClean(t,{format:!0,allowedAttributes:s,allowEmpty:r})))):t=$.trim($("#test-wrapper").hasClass("test-snippet-wrapper")?escapeHtml(t):escapeHtml($.htmlClean(t,{format:!0,allowedAttributes:s,allowEmpty:r}))),$("#code-wrapper").fadeOut(200,function(){$(this).html('<pre class="prettyprint">'+t+"</pre>"),prettyPrint(),$(this).fadeIn(200)}),parent.document.getElementById("bs-code").value=t}function escapeHtml(t){var e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return t.replace(/[&<>"']/g,function(t){return e[t]})}$("#code-slide-link").on("click",function(){$("#code-wrapper").slideToggle(400,function(){"block"==$("#code-wrapper").css("display")?$("#code-slide-link i").removeClass("glyphicon-arrow-down").addClass("glyphicon-arrow-up"):$("#code-slide-link i").removeClass("glyphicon-arrow-up").addClass("glyphicon-arrow-down")})}),function(t){var e,a=t();t.fn.sortable=function(n){var s,r=String(n);return n=t.extend({connectWith:!1,calllback:function(){}},n),this.each(function(){if(/^enable|disable|destroy$/.test(r))return s=t(this).children(t(this).data("items")).attr("draggable","enable"==r),void("destroy"==r&&s.add(this).removeData("connectWith items").off("dragstart.h5s dragend.h5s selectstart.h5s dragover.h5s dragenter.h5s drop.h5s"));var o,i;s=t(this).children(n.items);var d=t("<"+(/^ul|ol$/i.test(this.tagName)?"li":"div")+' class="sortable-placeholder">');s.find(n.handle).mousedown(function(){o=!0}).mouseup(function(){o=!1}),t(this).data("items",n.items),a=a.add(d),n.connectWith&&t(n.connectWith).add(this).data("connectWith",n.connectWith),s.attr("draggable","true").on("dragstart.h5s",function(a){if(n.handle&&!o)return!1;o=!1;var s=a.originalEvent.dataTransfer;s.effectAllowed="move",s.setData("Text","dummy"),i=(e=t(this)).addClass("sortable-dragging").index()}).on("dragend.h5s",function(){t(this).hasClass("sortable-dragging")&&(e.removeClass("sortable-dragging").show(),a.detach(),n.callback.call(this)),e=null}).not("a[href], img").on("selectstart.h5s",function(){return this.dragDrop&&this.dragDrop(),!1}).end().add([this,d]).on("dragover.h5s dragenter.h5s drop.h5s",function(r){return s.is(e)||n.connectWith===t(e).parent().data("connectWith")?"drop"==r.type?(r.stopPropagation(),a.filter(":visible").after(e),!1):(r.preventDefault(),r.originalEvent.dataTransfer.dropEffect="move",s.is(this)?(n.forcePlaceholderSize&&d.height(e.outerHeight()),e.hide(),t(this)[d.index()<t(this).index()?"after":"before"](d),a.not(d).detach()):a.is(this)||t(this).children(n.items).length||(a.detach(),t(this).append(d)),!1):!0})})}}(jQuery),$.fn.scrollToTop=function(){this.length>0&&$("body, html").animate({scrollTop:$(this).offset().top},500)};