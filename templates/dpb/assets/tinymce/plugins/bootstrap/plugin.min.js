"use strict";tinymce.PluginManager.requireLangPack("bootstrap"),tinymce.PluginManager.add("bootstrap",function(t,e){function a(a,r,l,c){var d=o(),p="";$(d).hasClass("active")&&($(d).hasClass("btn")?p=i(d,"bsBtn"):$(d).hasClass("glyphicon")?p=i(d,"bsIcon"):$(d).is("img")?p=i(d,"bsImage"):$(d).hasClass("table")?p=i(d,"bsTable"):$(d).hasClass("breadcrumb")?p=i(d,"bsBreadcrumb"):$(d).hasClass("pagination")?p=i(d,"bsPagination"):$(d).hasClass("pager")?p=i(d,"bsPager"):$(d).hasClass("label")?p=i(d,"bsLabel"):$(d).hasClass("badge")?p=i(d,"bsBadge"):$(d).hasClass("alert")?p=i(d,"bsAlert"):$(d).hasClass("panel")&&(p=i(d,"bsPanel")));var b=function(){var t="",n=tinymce.activeEditor.getParam("language");n||(n="en_EN"),t+='<input type="hidden" name="bs-code" id="bs-code" />';var o="?";return a.match(/\?/)&&(o="&"),t+='<iframe src="'+e+"/"+a+o+"language="+n+"&images_path="+y+"&bootstrap_css_path="+h+"&"+p+"&"+(new Date).getTime()+'"></iframe>'},m=v;$(window).width()<885&&(m=.9*$(window).width()),$(window).height()>l&&(l=.9*$(window).height()-90);t.windowManager.open({title:r,width:m,height:l,html:b(),buttons:[{text:"OK",subtype:"primary",onclick:function(t){s(t,c),this.parent().parent().close()}},{text:"Cancel",onclick:function(){this.parent().parent().close()}}]});$(".mce-floatpanel").find(".mce-widget.mce-abs-layout-item.mce-first").css({left:"auto",right:"82px"}),$(".mce-floatpanel").find(".mce-widget.mce-last.mce-abs-layout-item").css({left:"auto",right:"10px"}),$(window).on("resize",function(){n()})}function n(){var t=v;t=$(window).width()>v?v:.9*$(window).width(),$(".mce-floatpanel").width(t).css("left",($(window).width()-t)/2),$(".mce-floatpanel").find(".mce-container-body, .mce-foot, .mce-abs-layout").width(t),768>t?$("iframe").contents().find(".container").addClass("container-xs"):$("iframe").contents().find(".container").removeClass("container-xs")}function o(){var e=t.selection.getNode();if(!$(e).hasClass("active")||$(e).closest("ol.breadcrumb").length>0||$(e).closest("ul.pagination").length>0||$(e).closest("ul.pager").length>0||$(e).closest("div.alert").length>0)for(var a=[".table",".breadcrumb",".pagination",".pager",".alert",".panel"],n=!1,o=0;o<a.length;o++)$(e).closest(a[o]).length>0&&n===!1&&(e=$(e).closest(a[o]),n=!0);return e}function s(e,a){var n=r(document.getElementById("bs-code").value),s=o();if($(s).hasClass("active")){$(s).after(n);var i={bsBtn:"btn",bsIcon:"glyphicon",bsImage:"img",bsTable:"table",bsBreadcrumb:"breadcrumb",bsPagination:"pagination",bsPager:"pager",bsLabel:"label",bsBadge:"badge",bsAlert:"alert",bsPanel:"panel"};for(var l in i){var c=i[l];a==l&&("bsImage"==a&&$(s).is("img")?t.dom.remove(s):$(s).hasClass(c)&&t.dom.remove(s))}}else t.insertContent(n);tinymce.activeEditor.dom.remove(tinymce.activeEditor.dom.select('br[data-mce-bogus="1"]'))}function i(t,e){var a="";if("bsBtn"==e){var n,o=$(t)[0].outerHTML.replace(" active",""),s="";$(t).find("span")[0]&&(s=$(t).find("span").attr("class").split(" ")[1]);var i=new Array("default","btn-primary","btn-success","btn-info","btn-warning","btn-danger"),r="";for(n=i.length-1;n>=0;n--)$(t).hasClass(i[n])&&(r=i[n]);var l=new Array("btn-xs","btn-sm","btn-lg"),c="";for(n=l.length-1;n>=0;n--)$(t).hasClass(l[n])&&(c=l[n]);var d=$(t).prop("tagName").toLowerCase(),p="";"a"==d&&(p=$(t).attr("href"));var b="";("button"==d||"input"==d)&&(b=$(t).attr("type"));var m;m="button"==d||"a"==d?$(t).remove("i").text():$(t).val();var g="prepend";if($(t).find("span")[0]){var u=new RegExp("/^"+m+"/");u.test($(t).html())===!0&&(g="append")}o=encodeURIComponent(o),s=encodeURIComponent(s),r=encodeURIComponent(r),c=encodeURIComponent(c),d=encodeURIComponent(d),p=encodeURIComponent(p),b=encodeURIComponent(b),m=encodeURIComponent(m),g=encodeURIComponent(g),a="btnCode="+o+"&btnIcon="+s+"&btnStyle="+r+"&btnSize="+c+"&btnTag="+d+"&btnHref="+p+"&btnType="+b+"&btnText="+m+"&iconPos="+g}else if("bsImage"==e){var h=$(t).attr("src"),f="",y="",v="",C="",B="false";$(t).hasClass("img-rounded")?C="img-rounded":$(t).hasClass("img-circle")?C="img-circle":$(t).hasClass("img-thumbnail")&&(C="img-thumbnail"),$(t).hasClass("img-responsive")&&(B="true"),$(t).attr("alt")&&(f=$(t).attr("alt")),$(t).attr("width")&&(y=$(t).attr("width")),$(t).attr("height")&&(v=$(t).attr("height")),h=encodeURIComponent(h),f=encodeURIComponent(f),y=encodeURIComponent(y),v=encodeURIComponent(v),C=encodeURIComponent(C),a="imgSrc="+h+"&imgAlt="+f+"&imgWidth="+y+"&imgHeight="+v+"&imgStyle="+C+"&imgResponsive="+B}else if("bsIcon"==e){var w=$(t).attr("class").split(" ")[1],I=$(t).css("font-size"),k=$(t).css("color");w=encodeURIComponent(w),I=encodeURIComponent(I),k=encodeURIComponent(k),a="glyphicon="+w+"&iconSize="+I+"&iconColor="+k}else if("bsTable"==e){t=$(t).closest(".table");var E="false",P="false",x="false",_="false",R="false";$(t).hasClass("table-striped")&&(E="true"),$(t).hasClass("table-bordered")&&(P="true"),$(t).hasClass("table-hover")&&(x="true"),$(t).hasClass("table-condensed")&&(_="true"),$(t).hasClass("table-responsive")&&(R="true"),a="tableStriped="+E+"&tableBordered="+P+"&tableHover="+x+"&tableCondensed="+_+"&tableResponsive="+R}else("bsBreadcrumb"==e||"bsPagination"==e||"bsPager"==e||"bsLabel"==e||"bsBadge"==e||"bsAlert"==e|"bsPanel"==e)&&(a="edit=true");return a}function r(t){var e=document.createElement("div");return e.innerHTML=t,0===e.childNodes.length?"":e.childNodes[0].nodeValue}function l(){tinymce.activeEditor.hasVisual?tinymce.activeEditor.dom.addClass(tinymce.activeEditor.dom.select(".mce-content-body "),"hasVisual"):tinymce.activeEditor.dom.removeClass(tinymce.activeEditor.dom.select(".mce-content-body "),"hasVisual")}function c(){l(),tinymce.activeEditor.on("ExecCommand",function(t){"mceToggleVisualAid"==t.command,l()}),l(),tinymce.activeEditor.on("click keyup",function(t){var e="",a="";$(t.target).is("img")?(e="img",a="insertImageBtn"):$(t.target).attr("class")?$(t.target).attr("class").match(/btn/)?(e=".btn",a="insertBtnBtn"):$(t.target).attr("class").match(/glyphicon/)?(e=".glyphicon",a="insertIconBtn"):$(t.target).attr("class").match(/label/)?(e=".label",a="insertLabelBtn"):$(t.target).attr("class").match(/badge/)?(e=".badge",a="insertBadgeBtn"):$(t.target).attr("class").match(/alert/)&&(e=".alert",a="insertAlertBtn"):$(t.target).closest(".table").attr("class")?(e=".table",a="insertTableBtn"):$(t.target).closest(".breadcrumb").attr("class")?(e=".breadcrumb",a="insertBreadcrumbBtn"):$(t.target).closest(".pagination").attr("class")?(e=".pagination",a="insertPaginationBtn"):$(t.target).closest(".pager").attr("class")?(e=".pager",a="insertPagerBtn"):$(t.target).closest(".alert").attr("class")?(e=".alert",a="insertAlertBtn"):$(t.target).closest(".panel").attr("class")&&(e=".panel",a="insertPanelBtn"),p(),""!==e&&d(t.target,e,a)}),p()}function d(e,a,n){".glyphicon"==a?t.selection.setCursorLocation(e):".btn"==a&&$(e).is("input")!==!0&&t.selection.setCursorLocation(e,!0),".table"==a?($(e).closest(".table").addClass("active"),b(n,"on")):".breadcrumb"==a?($(e).closest(".breadcrumb").addClass("active"),b(n,"on")):".pagination"==a?($(e).closest(".pagination").addClass("active"),b(n,"on")):".pager"==a?($(e).closest(".pager").addClass("active"),b(n,"on")):".alert"==a?($(e).closest(".alert").addClass("active"),b(n,"on")):".panel"==a?($(e).closest(".panel").addClass("active"),b(n,"on")):($(e).addClass("active"),b(n,"on"))}function p(){for(var e=new Array(".btn",".glyphicon","img",".table",".breadcrumb",".pagination",".pager",".label",".badge",".alert",".panel"),a=0;a<e.length;a++)$(t.dom.select(e[a])).removeClass("active")}function b(e,a){for(var n=t.buttons.bootstrap.items,o=n.length-1;o>=0;o--)("allBtns"==e||n[o]._name==e)&&"on"==a&&$(n[o]).focus()}function m(){var t="@[accesskey|draggable|style|class|hidden|tabindex|contenteditable|id|title|contextmenu|lang|dir<ltr?rtl|spellcheck|onabort|onerror|onmousewheel|onblur|onfocus|onpause|oncanplay|onformchange|onplay|oncanplaythrough|onforminput|onplaying|onchange|oninput|onprogress|onclick|oninvalid|onratechange|oncontextmenu|onkeydown|onreadystatechange|ondblclick|onkeypress|onscroll|ondrag|onkeyup|onseeked|ondragend|onload|onseeking|ondragenter|onloadeddata|onselect|ondragleave|onloadedmetadata|onshow|ondragover|onloadstart|onstalled|ondragstart|onmousedown|onsubmit|ondrop|onmousemove|onsuspend|ondurationmouseout|ontimeupdate|onemptied|onmouseover|onvolumechange|onended|onmouseup|onwaiting],a[target<_blank?_self?_top?_parent|ping|media|href|hreflang|type|rel<alternate?archives?author?bookmark?external?feed?first?help?index?last?license?next?nofollow?noreferrer?prev?search?sidebar?tag?up],abbr,address,area[alt|coords|shape|href|target<_blank?_self?_top?_parent|ping|media|hreflang|type|shape<circle?default?poly?rect|rel<alternate?archives?author?bookmark?external?feed?first?help?index?last?license?next?nofollow?noreferrer?prev?search?sidebar?tag?up],article,aside,audio[src|preload<none?metadata?auto|autoplay<autoplay|loop<loop|controls<controls|mediagroup],blockquote[cite],body,br,button[autofocus<autofocus|disabled<disabled|form|formaction|formenctype|formmethod<get?put?post?delete|formnovalidate?novalidate|formtarget<_blank?_self?_top?_parent|name|type<reset?submit?button|value],canvas[width,height],caption,cite,code,col[span],colgroup[span],command[type<command?checkbox?radio|label|icon|disabled<disabled|checked<checked|radiogroup|default<default],datalist[data],dd,del[cite|datetime],details[open<open],dfn,div,dl,dt,-em/i,embed[src|type|width|height],eventsource[src],fieldset[disabled<disabled|form|name],figcaption,figure,footer,form[accept-charset|action|enctype|method<get?post?put?delete|name|novalidate<novalidate|target<_blank?_self?_top?_parent],-h1,-h2,-h3,-h4,-h5,-h6,header,hgroup,hr,iframe[name|src|srcdoc|seamless<seamless|width|height|sandbox],img[alt=|src|ismap|usemap|width|height],input[accept|alt|autocomplete<on?off|autofocus<autofocus|checked<checked|disabled<disabled|form|formaction|formenctype|formmethod<get?put?post?delete|formnovalidate?novalidate|formtarget<_blank?_self?_top?_parent|height|list|max|maxlength|min|multiple<multiple|name|pattern|placeholder|readonly<readonly|required<required|size|src|step|type<hidden?text?search?tel?url?email?password?datetime?date?month?week?time?datetime-local?number?range?color?checkbox?radio?file?submit?image?reset?button|value|width],ins[cite|datetime],kbd,keygen[autofocus<autofocus|challenge|disabled<disabled|form|name],label[for|form],legend,li[value],mark,map[name],menu[type<context?toolbar?list|label],meter[value|min|low|high|max|optimum],nav,noscript,object[data|type|name|usemap|form|width|height],ol[reversed|start],optgroup[disabled<disabled|label],option[disabled<disabled|label|selected<selected|value],output[for|form|name],-p,param[name,value],-pre,progress[value,max],q[cite],ruby,rp,rt,samp,script[src|async<async|defer<defer|type|charset],section,select[autofocus<autofocus|disabled<disabled|form|multiple<multiple|name|size],small,source[src|type|media],span,-strong/b,-sub,summary,-sup,table,tbody,td[colspan|rowspan|headers],textarea[autofocus<autofocus|disabled<disabled|form|maxlength|name|placeholder|readonly<readonly|required<required|rows|cols|wrap<soft|hard],tfoot,th[colspan|rowspan|headers|scope],thead,time[datetime],tr,ul,var,video[preload<none?metadata?auto|src|crossorigin|poster|autoplay<autoplay|mediagroup|loop<loop|muted<muted|controls<controls|width|height],wbr";return t}var g,u,h,f,y,v=885;"undefined"==typeof t.settings.bootstrapConfig.bootstrapElements&&(t.settings.bootstrapConfig.bootstrapElements={btn:!0,icon:!0,image:!0,table:!0,template:!0,breadcrumb:!0,pagination:!0,pager:!0,label:!0,badge:!0,alert:!0,panel:!0,snippet:!0}),g=t.settings.bootstrapConfig.bootstrapElements,"undefined"==typeof t.settings.bootstrapConfig&&(t.settings.bootstrapConfig=[]),t.settings.verify_html===!1&&"*[*]"===t.settings.valid_elements||t.settings.bootstrapConfig.overwriteValidElements===!1||(t.settings.valid_elements=m()),"undefined"==typeof t.settings.bootstrapConfig.bootstrapCssPath&&(u=e+"/css/bootstrap.min.css",t.settings.bootstrapConfig.bootstrapCssPath=u),h=t.settings.bootstrapConfig.bootstrapCssPath,"undefined"==typeof t.settings.bootstrapConfig.imagesPath&&(f=e+"/",t.settings.bootstrapConfig.imagesPath={imagesPath:f}),y=t.settings.bootstrapConfig.imagesPath,"undefined"==typeof(t.settings.bootstrapConfig.bootstrapElements.snippet===!0&&t.settings.bootstrapConfig.allowSnippetManagement)&&(t.settings.bootstrapConfig.allowSnippetManagement=!0);var C=t.settings.content_css;C="undefined"==typeof C?h+","+e+"/css/editor-content.min.css":h+","+C+","+e+"/css/editor-content.min.css",t.settings.content_css=C,t.on("init",function(){var a=e+"/css/editor.min.css";if(document.createStyleSheet)document.createStyleSheet(a);else{var n=t.dom.create("link",{rel:"stylesheet",href:a});document.getElementsByTagName("head")[0].appendChild(n)}var o=t.settings.bootstrapConfig.tinymceBackgroundColor;""!==o&&t.dom.addStyle(".mce-content-body {background-color: "+o+" !important}"),c()});var B=[],w=tinymce.ui.Factory.create({type:"button",text:"",classes:"widget btn bs-icon-btn",icon:"bootstrap-icon",tooltip:"Bootstrap Elements"});if(B.push(w),g.btn){var I=tinymce.ui.Factory.create({type:"button",classes:"widget btn bs-icon-btn",icon:"icon-btn",name:"insertBtnBtn",tooltip:"Insert/Edit Bootstrap Button",onclick:function(){a("bootstrap-btn.php","Insert/Edit Bootstrap Button",580,"bsBtn")}});B.push(I)}if(g.image){var k=tinymce.ui.Factory.create({type:"button",classes:"widget btn bs-icon-btn",icon:"icon-image",name:"insertImageBtn",tooltip:"Insert/Edit Bootstrap Image",onclick:function(){a("bootstrap-image.php","Insert/Edit Bootstrap Image",580,"bsImage")}});B.push(k)}if(g.icon){var E=tinymce.ui.Factory.create({type:"button",classes:"widget btn bs-icon-btn",icon:"icon-icon",name:"insertIconBtn",tooltip:"Insert/Edit Bootstrap Icon",onclick:function(){a("bootstrap-icon.php","Insert/Edit Bootstrap Icon",450,"bsIcon")}});B.push(E)}if(g.table){var P=tinymce.ui.Factory.create({type:"button",classes:"widget btn bs-icon-btn",icon:"icon-table",name:"insertTableBtn",tooltip:"Insert/Edit Bootstrap Table",onclick:function(){a("bootstrap-table.php","Insert/Edit Bootstrap Table",620,"bsTable")}});B.push(P)}if(g.template){var x=tinymce.ui.Factory.create({type:"button",classes:"widget btn bs-icon-btn",icon:"icon-template",name:"insertTemplateBtn",tooltip:"Insert Bootstrap Template",onclick:function(){a("bootstrap-template.php","Insert Bootstrap Template",580,"bsTemplate")}});B.push(x)}if(g.breadcrumb){var _=tinymce.ui.Factory.create({type:"button",classes:"widget btn bs-icon-btn",icon:"icon-breadcrumb",name:"insertBreadcrumbBtn",tooltip:"Insert/Edit Bootstrap Breadcrumb",onclick:function(){a("bootstrap-breadcrumb.php","Insert/Edit Bootstrap Breadcrumb",580,"bsBreadcrumb")}});B.push(_)}if(g.pagination){var R=tinymce.ui.Factory.create({type:"button",classes:"widget btn bs-icon-btn",icon:"icon-pagination",name:"insertPaginationBtn",tooltip:"Insert/Edit Bootstrap Pagination",onclick:function(){a("bootstrap-pagination.php","Insert/Edit Bootstrap Pagination",650,"bsPagination")}});B.push(R)}if(g.pager){var T=tinymce.ui.Factory.create({type:"button",classes:"widget btn bs-icon-btn",icon:"icon-pager",name:"insertPagerBtn",tooltip:"Insert/Edit Bootstrap Pager",onclick:function(){a("bootstrap-pager.php","Insert/Edit Bootstrap Pager",450,"bsPager")}});B.push(T)}if(g.label){var S=tinymce.ui.Factory.create({type:"button",classes:"widget btn bs-icon-btn",icon:"icon-label",name:"insertLabelBtn",tooltip:"Insert/Edit Bootstrap Label",onclick:function(){a("bootstrap-label.php","Insert/Edit Bootstrap Label",350,"bsLabel")}});B.push(S)}if(g.badge){var U=tinymce.ui.Factory.create({type:"button",classes:"widget btn bs-icon-btn",icon:"icon-badge",name:"insertBadgeBtn",tooltip:"Insert/Edit Bootstrap Badge",onclick:function(){a("bootstrap-badge.php","Insert/Edit Bootstrap Badge",350,"bsBadge")}});B.push(U)}if(g.alert){var A=tinymce.ui.Factory.create({type:"button",classes:"widget btn bs-icon-btn",icon:"icon-alert",name:"insertAlertBtn",tooltip:"Insert/Edit Bootstrap Alert",onclick:function(){a("bootstrap-alert.php","Insert/Edit Bootstrap Alert",580,"bsAlert")}});B.push(A)}if(g.panel){var F=tinymce.ui.Factory.create({type:"button",classes:"widget btn bs-icon-btn",icon:"icon-panel",name:"insertPanelBtn",tooltip:"Insert/Edit Bootstrap Panel",onclick:function(){a("bootstrap-panel.php","Insert/Edit Bootstrap Panel",650,"bsPanel")}});B.push(F)}if(g.snippet){var L=tinymce.ui.Factory.create({type:"button",classes:"widget btn bs-icon-btn",icon:"icon-snippet",name:"insertSnippetBtn",tooltip:"Insert/Edit Snippet",onclick:function(){a("bootstrap-snippet.php?allowEdit="+t.settings.bootstrapConfig.allowSnippetManagement,"Insert Snippet",650,"bsSnippet")}});B.push(L)}t.addButton("bootstrap",{type:"buttongroup",classes:"bs-btn",items:B})});